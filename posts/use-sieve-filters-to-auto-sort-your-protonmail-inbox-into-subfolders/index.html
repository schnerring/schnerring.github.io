<!doctype html><html lang=en><head><title>Use Sieve Filters to Auto-Sort Your ProtonMail Inbox into Subfolders ::
Michael Schnerring — Coder and Computer Enthusiast</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Sieve is a programming language used for email filtering. Today, I show you how I automatically sort my ProtonMail inbox into folders and subfolders using custom sieve filters. My setup uses the catch-all feature requiring at least a ProtonMail Professional subscription and a properly configured custom domain.
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://schnerring.net/posts/use-sieve-filters-to-auto-sort-your-protonmail-inbox-into-subfolders/><link rel=stylesheet href=https://schnerring.net/assets/style.css><link rel=stylesheet href=https://schnerring.net/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://schnerring.net/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://schnerring.net/img/favicon.png><link href=https://schnerring.net/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://schnerring.net/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://schnerring.net/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://schnerring.net/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://schnerring.net/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://schnerring.net/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Use Sieve Filters to Auto-Sort Your ProtonMail Inbox into Subfolders"><meta name=twitter:description content="Sieve is a programming language used for email filtering. Today, I show you how I automatically sort my ProtonMail inbox into folders and subfolders using custom sieve filters. My setup uses the catch-all feature requiring at least a ProtonMail Professional subscription and a properly configured custom domain."><meta property="og:title" content="Use Sieve Filters to Auto-Sort Your ProtonMail Inbox into Subfolders"><meta property="og:description" content="Sieve is a programming language used for email filtering. Today, I show you how I automatically sort my ProtonMail inbox into folders and subfolders using custom sieve filters. My setup uses the catch-all feature requiring at least a ProtonMail Professional subscription and a properly configured custom domain."><meta property="og:type" content="article"><meta property="og:url" content="https://schnerring.net/posts/use-sieve-filters-to-auto-sort-your-protonmail-inbox-into-subfolders/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-06-16T20:32:21+02:00"><meta property="article:modified_time" content="2021-06-16T20:32:21+02:00"><meta property="og:site_name" content="Michael Schnerring"><script async defer data-domain=schnerring.net src=https://plausible.schnerring.net/js/plausible.js></script></head><body><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>schnerring.net</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Use Sieve Filters to Auto-Sort Your ProtonMail Inbox into Subfolders</h1><div class=post-meta><span class=post-date>2021-06-16</span></div><span class=post-tags><a href=https://schnerring.net/tags/protonmail/>#protonmail</a>&nbsp;
<a href=https://schnerring.net/tags/sieve/>#sieve</a>&nbsp;</span><figure class=post-cover><img src=https://schnerring.net/posts/use-sieve-filters-to-auto-sort-your-protonmail-inbox-into-subfolders/img/cover.svg alt="Use Sieve Filters to Auto-Sort Your ProtonMail Inbox into Subfolders"></figure><div class=post-content><p><a href=https://en.wikipedia.org/wiki/Sieve_(mail_filtering_language)>Sieve</a> is a programming language used for email filtering. Today, I show you how I automatically sort my ProtonMail inbox into folders and subfolders using <a href=https://protonmail.com/support/knowledge-base/sieve-advanced-custom-filters/>custom sieve filters</a>. My setup uses the <a href=https://protonmail.com/support/knowledge-base/catch-all/>catch-all feature</a> requiring at least a <a href=https://protonmail.com/pricing>ProtonMail Professional subscription</a> and a <a href=https://protonmail.com/support/categories/custom-domains/>properly configured custom domain</a>.</p><p>The ProtonMail Bridge has been supporting subfolders for a while now. With the <a href=https://protonmail.com/blog/new-protonmail-announcement/>release of the re-designed ProtonMail for web</a>, subfolders are now officially supported. So now is a great time to share my setup with you guys!</p><h2 id=the-goal>The Goal</h2><p>I only want emails from unknown senders to land in my inbox, e.g., non-automated messages from people directly contacting me or emails from unknown websites. Sieve filters sort emails from well-known senders into folders and subfolders, like webshops or social media for which I have signed up.</p><p>I use root-level folders to categorize my email. Subfolders are for specific websites belonging to a category:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Inbox/
Webshops/
├─ Amazon/
├─ Ex Libris/
Entertainment/
├─ Netflix/
├─ Spotify/
</code></pre></div><p>Here, <code>Webshops</code> and <code>Entertainment</code> are the categories, and <code>Amazon</code> and <code>Spotify</code> are specific websites. For each website, I use a separate email address that maps to a pre-created folder. The generic structure of the email address I use to sign up for websites is the following:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>category+website@schnerring.net
</code></pre></div><p>For the example folder structure above, the email-to-folder mapping looks like this:</p><ul><li><code>webshops+amazon@schnerring.net</code> ↔ <code>Webshops/Amazon/</code></li><li><code>webshops+exlibris@schnerring.net</code> ↔ <code>Webshops/Ex Libris/</code></li><li><code>entertainment+netflix@schnerring.net</code> ↔ <code>Entertainment/Netflix/</code></li><li><code>entertainment+spotify@schnerring.net</code> ↔ <code>Entertainment/Spotify/</code></li><li><code>*@schnerring.net</code> ↔ <code>Inbox/</code> (<strong>catch-all</strong>)</li></ul><h2 id=the-solution>The Solution</h2><p>You can add custom sieve filters in the ProtonMail web client by navigating to <code>Settings</code> → <code>Filters</code> → <code>Add sieve filter</code>. The following snippet meets all of my requirements:</p><pre><code class=language-sieve data-lang=sieve>require [&quot;include&quot;, &quot;variables&quot;, &quot;fileinto&quot;, &quot;envelope&quot;];

if envelope :localpart :matches &quot;To&quot; &quot;*+*&quot; {
  set :lower &quot;category&quot; &quot;${1}&quot;;
  set :lower &quot;website&quot;  &quot;${2}&quot;;
}
else {
  return;
}

if string :is &quot;${website}&quot; &quot;exlibris&quot; {
  fileinto &quot;${category}/Ex Libris&quot;;
} else {
  fileinto &quot;${category}&quot;;
  fileinto &quot;${category}/${website}&quot;;
}
</code></pre><p>The <code>require</code> command in the first line is used to load extensions that provide functionality, like <code>fileinto</code> to file messages into folders or <code>variables</code> to declare variables.</p><p>Next, the <code>if</code>-conditional checks the <code>:localpart</code>, the part before the <code>@</code> symbol, of the <code>To</code> address. If it matches the pattern <code>*+*</code> (<code>category+website</code>):</p><ul><li>the value of the <code>category</code> variable is set to the match left of <code>+</code> symbol (<code>${1}</code>)</li><li>the value of the <code>website</code> variable is set to the match right of the <code>+</code> symbol (<code>${2}</code>).</li></ul><p>If <code>:localpart</code> does not match the pattern (<code>else</code>), the sieve filter exits (<code>return</code>).</p><p>Next, the actual sorting happens. Let&rsquo;s look into the <code>else</code> case first:</p><pre><code class=language-sieve data-lang=sieve>} else {
  fileinto &quot;${category}&quot;;
  fileinto &quot;${category}/${website}&quot;;
}
</code></pre><p>Most of the magic happens here. The email is first moved to the <code>category</code> folder and then moved to the more specific <code>website</code> folder. This way, if the <code>website</code> subfolder does not (yet) exist, the email is at least moved into the root-level <code>category</code> folder. I find this useful when only ordering at a webshop <em>once</em> via guest checkout instead of signing up. This way, I don&rsquo;t need to bother creating an extra subfolder that will only ever contain one or two emails.</p><p>Lastly, let&rsquo;s cover the exception for the <code>exlibris</code> webshop in the <code>if</code>-part:</p><pre><code class=language-sieve data-lang=sieve>if string :is &quot;${website}&quot; &quot;exlibris&quot; {
  fileinto &quot;${category}/Ex Libris&quot;;
}
</code></pre><p>It is just a cosmetic exception. When I register at a webshop with <code>webshops+exlibris@schnerring.net</code> but want to map it to a folder called <code>Ex Libris</code>, an explicit mapping is required. Note that <code>fileinto</code> is not case-sensitive, so it is valid if the email address is <code>webshops+amazon@schnerring.net</code>, but the folder name is <code>Webshops/Amazon/</code>. It also is easily extensible by adding more <code>elseif</code> conditions.</p><p>For more details on advanced custom sieve filtering, check the <a href=https://protonmail.com/support/knowledge-base/sieve-advanced-custom-filters/>official ProtonMail documentation</a>.</p></div><div id=remark42></div><script>const defaultTheme="light";function getHelloFriendTheme(){const a=localStorage&&localStorage.getItem("theme");return a||defaultTheme}</script><script>var remark_config={host:"https://remark42.schnerring.net",site_id:"schnerring.net",theme:getHelloFriendTheme(),show_email_subscription:!1}</script><script>!function(d,b){for(var c=0,a,e,f;c<d.length;c++)a=b.createElement("script"),e=".js",f=b.head||b.body,"noModule"in a?(a.type="module",e=".mjs"):a.async=!0,a.defer=!0,a.src=remark_config.host+"/web/"+d[c]+e,f.appendChild(a)}(remark_config.components||["embed"],document)</script><script>const themeToggle=document.querySelector(".theme-toggle");themeToggle.addEventListener("click",()=>{setTimeout(()=>window.REMARK42.changeTheme(getHelloFriendTheme()),10)})</script></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><p>Copyright © 2020 Michael Schnerring</p><p xmlns:dct=http://purl.org/dc/terms/ xmlns:cc=http://creativecommons.org/ns# class=license-text><a rel=cc:attributionurl property="dct:title" href=https://github.com/schnerring/schnerring.github.io/tree/main/content>Content</a> licensed under <a rel=license href=https://creativecommons.org/licenses/by/4.0>CC BY 4.0</a></p></div></div></footer><script src=https://schnerring.net/assets/main.js></script><script src=https://schnerring.net/assets/prism.js></script></div></body></html>